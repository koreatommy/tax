# ê°œì¸ ì‚¬ì—…ì†Œë“ ì›ì²œì§•ìˆ˜ ì˜¨ë¼ì¸ í”„ë¡œê·¸ë¨ PRD

## ğŸ“‹ í”„ë¡œì íŠ¸ ê°œìš”

í”„ë¦¬ëœì„œ, ê°•ì‚¬, ì™¸ì£¼ì§ì› ë“±ì—ê²Œ ì§€ê¸‰í•˜ëŠ” ì‚¬ì—…ì†Œë“(3.3%)ì„ ê´€ë¦¬í•˜ëŠ” ì›¹ ê¸°ë°˜ ì›ì²œì§•ìˆ˜ ê´€ë¦¬ ì‹œìŠ¤í…œ

### í”„ë¡œì íŠ¸ ì •ë³´
- **ë²„ì „**: MVP (Minimum Viable Product)
- **ë°°í¬ í™˜ê²½**: Vercel (Git ìë™ ë°°í¬)
- **ë°ì´í„°ë² ì´ìŠ¤**: Supabase (PostgreSQL)
- **ê°œë°œ ì–¸ì–´**: TypeScript
- **ì˜ˆìƒ ê°œë°œ ê¸°ê°„**: 6ì£¼

---

## ğŸ¯ í•µì‹¬ ê¸°ëŠ¥ ìš”êµ¬ì‚¬í•­

### A. ì§€ê¸‰ ëŒ€ìƒì ê´€ë¦¬

#### ê¸°ëŠ¥ ìƒì„¸
- **ì¸ì ì‚¬í•­ ë“±ë¡**
  - ì„±ëª… (í•„ìˆ˜)
  - ì£¼ë¯¼ë“±ë¡ë²ˆí˜¸ (í•„ìˆ˜, ì•”í˜¸í™” ì €ì¥)
  - ì£¼ì†Œ
  - ì—°ë½ì²˜
  - ì´ë©”ì¼

- **ê³„ì¢Œì •ë³´ ê´€ë¦¬**
  - ì€í–‰ëª…
  - ê³„ì¢Œë²ˆí˜¸ (ì•”í˜¸í™” ì €ì¥)

- **ì‚¬ì—…ì êµ¬ë¶„**
  - í”„ë¦¬ëœì„œ
  - ê°•ì‚¬
  - ì™¸ì£¼ì§ì›
  - ê¸°íƒ€ ìœ í˜•

- **ê³„ì•½ ì •ë³´**
  - ê³„ì•½ ì‹œì‘ì¼
  - ê³„ì•½ ì¢…ë£Œì¼
  - ê³„ì•½ì„œ íŒŒì¼ ì—…ë¡œë“œ (Supabase Storage)

- **ì¤‘ë³µ ê²€ì¦**
  - ì£¼ë¯¼ë“±ë¡ë²ˆí˜¸ ê¸°ë°˜ ì¤‘ë³µ ë“±ë¡ ë°©ì§€
  - ë™ì¼ íšŒì‚¬ ë‚´ ì¤‘ë³µ ì²´í¬

#### í™”ë©´ êµ¬ì„±
- ëŒ€ìƒì ëª©ë¡ (í…Œì´ë¸” ë·°)
- ëŒ€ìƒì ë“±ë¡ í¼
- ëŒ€ìƒì ìƒì„¸ ì •ë³´
- ëŒ€ìƒì ìˆ˜ì •/ì‚­ì œ

---

### B. ì§€ê¸‰ ê´€ë¦¬

#### ê¸°ëŠ¥ ìƒì„¸
- **ì§€ê¸‰ ë‚´ì—­ ì…ë ¥**
  - ì§€ê¸‰ ëŒ€ìƒì ì„ íƒ (ë“œë¡­ë‹¤ìš´)
  - ì§€ê¸‰ì¼ì (ë‚ ì§œ ì„ íƒê¸°)
  - ì§€ê¸‰ì•¡ (ìˆ«ì ì…ë ¥)
  - ì§€ê¸‰ ì‚¬ìœ  (í…ìŠ¤íŠ¸)

- **ìë™ ì„¸ì•¡ ê³„ì‚°**
  - ì†Œë“ì„¸ 3% ìë™ ê³„ì‚°
  - ì§€ë°©ì†Œë“ì„¸ 0.3% ìë™ ê³„ì‚°
  - ì´ ì›ì²œì§•ìˆ˜ì„¸ì•¡ 3.3% í‘œì‹œ
  - ì‹¤ì§€ê¸‰ì•¡ ìë™ ì‚°ì¶œ (ì§€ê¸‰ì•¡ - ì´ì„¸ì•¡)

- **ê³„ì‚° ê³µì‹**
  ```
  ì§€ê¸‰ì•¡: 1,000,000ì›
  ì†Œë“ì„¸ (3%): 30,000ì›
  ì§€ë°©ì†Œë“ì„¸ (0.3%): 3,000ì›
  ì´ ì„¸ì•¡ (3.3%): 33,000ì›
  ì‹¤ì§€ê¸‰ì•¡: 967,000ì›
  ```

- **ì¼ê´„ ì§€ê¸‰ ì²˜ë¦¬**
  - ì—‘ì…€ íŒŒì¼ ì—…ë¡œë“œ (xlsx, xls)
  - ë‹¤ìˆ˜ ì§€ê¸‰ ê±´ ë™ì‹œ ì²˜ë¦¬
  - ì—‘ì…€ í…œí”Œë¦¿ ë‹¤ìš´ë¡œë“œ ì œê³µ
  - ì—…ë¡œë“œ ì „ ë°ì´í„° ê²€ì¦

- **ì§€ê¸‰ ì´ë ¥ ì¡°íšŒ**
  - ì „ì²´ ì§€ê¸‰ ë‚´ì—­ í…Œì´ë¸”
  - ê¸°ê°„ë³„ í•„í„°ë§ (ì‹œì‘ì¼~ì¢…ë£Œì¼)
  - ëŒ€ìƒìë³„ í•„í„°ë§
  - ì§€ê¸‰ ìœ í˜•ë³„ í•„í„°ë§
  - ê²€ìƒ‰ ê¸°ëŠ¥ (ëŒ€ìƒìëª…)
  - ì •ë ¬ ê¸°ëŠ¥ (ë‚ ì§œ, ê¸ˆì•¡)

#### í™”ë©´ êµ¬ì„±
- ì§€ê¸‰ ëª©ë¡ (í…Œì´ë¸” ë·°)
- ì§€ê¸‰ ë“±ë¡ í¼
- ì¼ê´„ ì§€ê¸‰ í˜ì´ì§€
- ì§€ê¸‰ ìƒì„¸ ì •ë³´

---

### C. ì›ì²œì§•ìˆ˜ì˜ìˆ˜ì¦ ë°œê¸‰

#### ê¸°ëŠ¥ ìƒì„¸
- **ìë™ ì–‘ì‹ ìƒì„±**
  - êµ­ì„¸ì²­ í‘œì¤€ ì„œì‹ ì¤€ìˆ˜
  - í•„ìˆ˜ ì •ë³´ ìë™ ì…ë ¥
    - ì›ì²œì§•ìˆ˜ì˜ë¬´ì ì •ë³´ (íšŒì‚¬)
    - ì†Œë“ì ì •ë³´ (ëŒ€ìƒì)
    - ì§€ê¸‰ì•¡ ë° ì„¸ì•¡ ì •ë³´
    - ë°œê¸‰ ë²ˆí˜¸ ìë™ ìƒì„±

- **PDF ë‹¤ìš´ë¡œë“œ**
  - ê°œë³„ ì˜ìˆ˜ì¦ PDF ìƒì„±
  - ì¼ê´„ PDF ìƒì„± (ZIP ì••ì¶•)
  - í•œê¸€ í°íŠ¸ ì§€ì›
  - A4 ìš©ì§€ ê·œê²©

- **ì´ë©”ì¼ ìë™ ë°œì†¡**
  - ëŒ€ìƒì ì´ë©”ì¼ë¡œ PDF ì „ì†¡
  - ë°œì†¡ ì´ë ¥ ì €ì¥
  - ì¬ë°œì†¡ ê¸°ëŠ¥
  - ì´ë©”ì¼ í…œí”Œë¦¿ ì‚¬ìš©

- **ì¬ë°œê¸‰ ê¸°ëŠ¥**
  - ë°œê¸‰ ì´ë ¥ ê´€ë¦¬
  - ì¬ì¶œë ¥ ê°€ëŠ¥
  - ë°œê¸‰ ì¼ì‹œ ê¸°ë¡
  - ë°œê¸‰ì ê¸°ë¡

#### í™”ë©´ êµ¬ì„±
- ì˜ìˆ˜ì¦ ëª©ë¡
- ì˜ìˆ˜ì¦ ë¯¸ë¦¬ë³´ê¸°
- ì¼ê´„ ë°œê¸‰ í˜ì´ì§€
- ë°œê¸‰ ì´ë ¥ ì¡°íšŒ

---

## ğŸ” ì¶”ê°€ ê³ ë ¤ì‚¬í•­ (í–¥í›„ í™•ì¥)

### D. ì›ì²œì§•ìˆ˜ì´í–‰ìƒí™©ì‹ ê³ ì„œ ê´€ë¦¬
- ì›”ë³„/ë°˜ê¸°ë³„/ì—°ê°„ ì‹ ê³ ì„œ ìë™ ìƒì„±
- êµ­ì„¸ì²­ í™ˆíƒìŠ¤ ì œì¶œìš© íŒŒì¼ ìƒì„± (XML/TXT)
- ì‹ ê³  ê¸°í•œ ì•Œë¦¼ ê¸°ëŠ¥
- ìˆ˜ì •ì‹ ê³  ê¸°ëŠ¥

### E. ë³´ì•ˆ ê´€ë¦¬
- ì£¼ë¯¼ë“±ë¡ë²ˆí˜¸ AES-256 ì•”í˜¸í™” ì €ì¥
- ì ‘ê·¼ ê¶Œí•œ ê´€ë¦¬ (ê´€ë¦¬ì/ì‹¤ë¬´ì)
- ê°ì‚¬ ë¡œê·¸ (ì¡°íšŒ/ìˆ˜ì • ì´ë ¥)
- ê°œì¸ì •ë³´ ë³´ìœ ê¸°ê°„ ì„¤ì • (5ë…„)
- ë§ˆìŠ¤í‚¹ ì²˜ë¦¬ (ì£¼ë¯¼ë²ˆí˜¸ ë’·ìë¦¬ *****)

### F. íšŒì‚¬(ì›ì²œì§•ìˆ˜ì˜ë¬´ì) ì •ë³´ ê´€ë¦¬
- ì‚¬ì—…ìë“±ë¡ë²ˆí˜¸
- ìƒí˜¸/ë²•ì¸ëª…
- ëŒ€í‘œìëª…
- ì‚¬ì—…ì¥ ì£¼ì†Œ
- ë‹´ë‹¹ì ì •ë³´

### G. ì§€ê¸‰ëª…ì„¸ì„œ ì œì¶œ
- ì‚¬ì—…ì†Œë“ ì§€ê¸‰ëª…ì„¸ì„œ ìë™ ìƒì„± (ì—° 1íšŒ)
- êµ­ì„¸ì²­ ì œì¶œìš© íŒŒì¼ ìƒì„±
- ì œì¶œ ì´ë ¥ ê´€ë¦¬

### H. í†µê³„ ë° ëŒ€ì‹œë³´ë“œ
- ì›”ë³„/ì—°ë„ë³„ ì§€ê¸‰ ì´ì•¡ í†µê³„
- ì†Œë“ì ìœ í˜•ë³„ í†µê³„
- ì„¸ì•¡ ë‚©ë¶€ í˜„í™©
- ì—°ê°„ ì§€ê¸‰ì•¡ ìƒìœ„ ì†Œë“ì ëª©ë¡

### I. í¸ì˜ ê¸°ëŠ¥
- ì§€ê¸‰ í…œí”Œë¦¿ ì €ì¥
- ì—‘ì…€ ë‹¤ìš´ë¡œë“œ (ì „ì²´ ë°ì´í„°)
- ìë™ ë°±ì—… ê¸°ëŠ¥
- ì§€ê¸‰ ì˜ˆì • ì•Œë¦¼
- ëª¨ë°”ì¼ ë°˜ì‘í˜• UI

---

## ğŸ›  ê¸°ìˆ  ìŠ¤íƒ (MVP)

### ë°°í¬ í™˜ê²½
```yaml
ë°°í¬: Vercel (Git ìë™ ë°°í¬)
ë°ì´í„°ë² ì´ìŠ¤: Supabase (PostgreSQL + Auth + Storage)
ì•„í‚¤í…ì²˜: Full-stack Next.js (App Router + API Routes)
```

### í”„ë¡ íŠ¸ì—”ë“œ & ë°±ì—”ë“œ
```typescript
Framework: Next.js 14 (App Router) + TypeScript
Runtime: Node.js (Vercel Serverless)
Language: TypeScript 5.x
```

**ì„ ì • ì´ìœ :**
- Vercelì€ Next.js ì œì‘ì‚¬ë¡œ ìµœê³ ì˜ ì„±ëŠ¥ ë° ìµœì í™”
- API Routesë¡œ ë³„ë„ ë°±ì—”ë“œ ì„œë²„ ë¶ˆí•„ìš”
- Edge Functions ì§€ì›ìœ¼ë¡œ ë¹ ë¥¸ ì‘ë‹µ
- ìë™ SSR/ISR ìµœì í™”
- Git í‘¸ì‹œë§Œìœ¼ë¡œ ìë™ ë°°í¬

### ë°ì´í„°ë² ì´ìŠ¤ & ì¸ì¦
```typescript
Database: Supabase PostgreSQL
Auth: Supabase Auth (JWT)
Storage: Supabase Storage (íŒŒì¼ ì €ì¥)
Security: Row Level Security (RLS)
Client: @supabase/supabase-js
```

**ì„ ì • ì´ìœ :**
- PostgreSQL ê¸°ë°˜ìœ¼ë¡œ ì•ˆì •ì 
- ì‹¤ì‹œê°„ ê¸°ëŠ¥ ë‚´ì¥
- ì•”í˜¸í™” ë° ë³´ì•ˆ ê¸°ëŠ¥ ê°•ë ¥
- RLSë¡œ ë°ì´í„° ì ‘ê·¼ ì œì–´
- ë¬´ë£Œ í‹°ì–´ë¡œ ì‹œì‘ ê°€ëŠ¥ (500MB DB)

### UI & ìŠ¤íƒ€ì¼ë§
```typescript
CSS Framework: Tailwind CSS
Component Library: shadcn/ui
Icons: Lucide React
Base Components: Radix UI
Utilities: clsx, tailwind-merge
```

**ì„ ì • ì´ìœ :**
- ë¹ ë¥¸ ê°œë°œ ì†ë„
- ë°˜ì‘í˜• ìë™ ì§€ì›
- ë‹¤í¬ëª¨ë“œ ì‰¬ìš´ êµ¬í˜„
- ì ‘ê·¼ì„± í‘œì¤€ ì¤€ìˆ˜
- ì»¤ìŠ¤í„°ë§ˆì´ì§• ìš©ì´

### í¼ & ìœ íš¨ì„± ê²€ì‚¬
```typescript
Form Management: React Hook Form
Schema Validation: Zod
Custom Validators: ì£¼ë¯¼ë²ˆí˜¸, ì‚¬ì—…ìë²ˆí˜¸ ê²€ì¦
```

**ì„ ì • ì´ìœ :**
- íƒ€ì… ì•ˆì „ì„±
- ì„±ëŠ¥ ìµœì í™” (ë¦¬ë Œë” ìµœì†Œí™”)
- Supabaseì™€ ìŠ¤í‚¤ë§ˆ ê³µìœ  ê°€ëŠ¥
- ì§ê´€ì ì¸ API

### ìƒíƒœ ê´€ë¦¬
```typescript
Global State: Zustand (ì‚¬ìš©ì ì •ë³´ ë“±)
Server State: TanStack Query (React Query)
Real-time: Supabase Realtime (ì˜µì…˜)
```

**ì„ ì • ì´ìœ :**
- ê°€ë²¼ì›€ (Redux ëŒ€ë¹„)
- ê°„ë‹¨í•œ API
- ìºì‹± ë° ë™ê¸°í™” ìë™í™”
- Optimistic Update ì§€ì›

### íŒŒì¼ ì²˜ë¦¬
```typescript
PDF Generation: jsPDF + jspdf-autotable
Excel: xlsx (SheetJS)
File Storage: Supabase Storage
```

**ì„ ì • ì´ìœ :**
- í´ë¼ì´ì–¸íŠ¸ ì‚¬ì´ë“œì—ì„œ ë¹ ë¥¸ ìƒì„±
- ì„œë²„ ë¶€í•˜ ìµœì†Œí™”
- í•œê¸€ í°íŠ¸ ì§€ì›
- ë¸Œë¼ìš°ì €ì—ì„œ ì§ì ‘ ìƒì„± ê°€ëŠ¥

### ì´ë©”ì¼ ë°œì†¡
```typescript
Email Service: Resend (Vercel ê³µì‹ íŒŒíŠ¸ë„ˆ)
Alternative: SendGrid
```

**ì„ ì • ì´ìœ :**
- Vercelê³¼ ì™„ë²½í•œ í†µí•©
- Next.js API Routesì—ì„œ ì‰½ê²Œ ì‚¬ìš©
- ë¬´ë£Œ í‹°ì–´ ì œê³µ (ì›” 100í†µ)
- ê°„ë‹¨í•œ API

### ìœ í‹¸ë¦¬í‹°
```typescript
Date: date-fns (í•œêµ­ ë¡œì¼€ì¼ ì§€ì›)
Classnames: clsx, cn utility
Encryption: crypto-js (ì¶”ê°€ ì•”í˜¸í™” ì‹œ)
```

### í…ŒìŠ¤íŠ¸
```typescript
E2E Testing: Playwright
Unit Testing: Vitest
Component Testing: Testing Library
```

**ì„ ì • ì´ìœ :**
- ì‹¤ì œ ì‚¬ìš©ì ì‹œë‚˜ë¦¬ì˜¤ í…ŒìŠ¤íŠ¸
- í¬ë¡œìŠ¤ ë¸Œë¼ìš°ì € í…ŒìŠ¤íŠ¸
- CI/CD í†µí•© ìš©ì´

---

## ğŸ“ í”„ë¡œì íŠ¸ êµ¬ì¡°

```
tax-withholding-mvp/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ (auth)/                     # ì¸ì¦ ë ˆì´ì•„ì›ƒ ê·¸ë£¹
â”‚   â”‚   â”œâ”€â”€ login/
â”‚   â”‚   â”‚   â””â”€â”€ page.tsx           # ë¡œê·¸ì¸ í˜ì´ì§€
â”‚   â”‚   â””â”€â”€ register/
â”‚   â”‚       â””â”€â”€ page.tsx           # íšŒì›ê°€ì… í˜ì´ì§€
â”‚   â”‚
â”‚   â”œâ”€â”€ (dashboard)/                # ëŒ€ì‹œë³´ë“œ ë ˆì´ì•„ì›ƒ ê·¸ë£¹
â”‚   â”‚   â”œâ”€â”€ layout.tsx             # ê³µí†µ ë ˆì´ì•„ì›ƒ (ì‚¬ì´ë“œë°”)
â”‚   â”‚   â”œâ”€â”€ page.tsx               # ëŒ€ì‹œë³´ë“œ í™ˆ
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ payees/                # ì§€ê¸‰ ëŒ€ìƒì ê´€ë¦¬
â”‚   â”‚   â”‚   â”œâ”€â”€ page.tsx          # ëª©ë¡
â”‚   â”‚   â”‚   â”œâ”€â”€ new/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ page.tsx      # ì‹ ê·œ ë“±ë¡
â”‚   â”‚   â”‚   â””â”€â”€ [id]/
â”‚   â”‚   â”‚       â”œâ”€â”€ page.tsx      # ìƒì„¸ ì •ë³´
â”‚   â”‚   â”‚       â””â”€â”€ edit/
â”‚   â”‚   â”‚           â””â”€â”€ page.tsx  # ìˆ˜ì •
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ payments/              # ì§€ê¸‰ ê´€ë¦¬
â”‚   â”‚   â”‚   â”œâ”€â”€ page.tsx          # ëª©ë¡
â”‚   â”‚   â”‚   â”œâ”€â”€ new/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ page.tsx      # ì‹ ê·œ ì§€ê¸‰
â”‚   â”‚   â”‚   â”œâ”€â”€ bulk/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ page.tsx      # ì¼ê´„ ì§€ê¸‰
â”‚   â”‚   â”‚   â””â”€â”€ [id]/
â”‚   â”‚   â”‚       â””â”€â”€ page.tsx      # ìƒì„¸ ì •ë³´
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ receipts/              # ì›ì²œì§•ìˆ˜ì˜ìˆ˜ì¦
â”‚   â”‚       â”œâ”€â”€ page.tsx          # ëª©ë¡
â”‚   â”‚       â”œâ”€â”€ generate/
â”‚   â”‚       â”‚   â””â”€â”€ page.tsx      # ì¼ê´„ ìƒì„±
â”‚   â”‚       â””â”€â”€ [id]/
â”‚   â”‚           â””â”€â”€ page.tsx      # ìƒì„¸ (ë¯¸ë¦¬ë³´ê¸°)
â”‚   â”‚
â”‚   â”œâ”€â”€ api/                        # API Routes
â”‚   â”‚   â”œâ”€â”€ payees/
â”‚   â”‚   â”‚   â”œâ”€â”€ route.ts          # GET (ëª©ë¡), POST (ìƒì„±)
â”‚   â”‚   â”‚   â””â”€â”€ [id]/
â”‚   â”‚   â”‚       â””â”€â”€ route.ts      # GET, PUT, DELETE
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ payments/
â”‚   â”‚   â”‚   â”œâ”€â”€ route.ts          # GET, POST
â”‚   â”‚   â”‚   â”œâ”€â”€ [id]/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ route.ts      # GET, PUT, DELETE
â”‚   â”‚   â”‚   â””â”€â”€ bulk/
â”‚   â”‚   â”‚       â””â”€â”€ route.ts      # POST (ì¼ê´„ ì²˜ë¦¬)
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ receipts/
â”‚   â”‚   â”‚   â”œâ”€â”€ route.ts          # GET (ëª©ë¡)
â”‚   â”‚   â”‚   â”œâ”€â”€ generate/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ route.ts      # POST (PDF ìƒì„±)
â”‚   â”‚   â”‚   â””â”€â”€ send-email/
â”‚   â”‚   â”‚       â””â”€â”€ route.ts      # POST (ì´ë©”ì¼ ë°œì†¡)
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ upload/
â”‚   â”‚       â””â”€â”€ excel/
â”‚   â”‚           â””â”€â”€ route.ts      # POST (ì—‘ì…€ ì—…ë¡œë“œ)
â”‚   â”‚
â”‚   â”œâ”€â”€ layout.tsx                  # ë£¨íŠ¸ ë ˆì´ì•„ì›ƒ
â”‚   â””â”€â”€ globals.css                 # ê¸€ë¡œë²Œ ìŠ¤íƒ€ì¼
â”‚
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ ui/                         # shadcn/ui ì»´í¬ë„ŒíŠ¸
â”‚   â”‚   â”œâ”€â”€ button.tsx
â”‚   â”‚   â”œâ”€â”€ input.tsx
â”‚   â”‚   â”œâ”€â”€ table.tsx
â”‚   â”‚   â”œâ”€â”€ dialog.tsx
â”‚   â”‚   â”œâ”€â”€ select.tsx
â”‚   â”‚   â””â”€â”€ ...
â”‚   â”‚
â”‚   â”œâ”€â”€ layout/
â”‚   â”‚   â”œâ”€â”€ Sidebar.tsx
â”‚   â”‚   â”œâ”€â”€ Header.tsx
â”‚   â”‚   â””â”€â”€ Navigation.tsx
â”‚   â”‚
â”‚   â”œâ”€â”€ payees/
â”‚   â”‚   â”œâ”€â”€ PayeeForm.tsx          # ëŒ€ìƒì ë“±ë¡/ìˆ˜ì • í¼
â”‚   â”‚   â”œâ”€â”€ PayeeList.tsx          # ëŒ€ìƒì ëª©ë¡ í…Œì´ë¸”
â”‚   â”‚   â”œâ”€â”€ PayeeDetail.tsx        # ëŒ€ìƒì ìƒì„¸ ì •ë³´
â”‚   â”‚   â””â”€â”€ PayeeSearch.tsx        # ê²€ìƒ‰ ì»´í¬ë„ŒíŠ¸
â”‚   â”‚
â”‚   â”œâ”€â”€ payments/
â”‚   â”‚   â”œâ”€â”€ PaymentForm.tsx        # ì§€ê¸‰ ë“±ë¡ í¼
â”‚   â”‚   â”œâ”€â”€ PaymentList.tsx        # ì§€ê¸‰ ëª©ë¡ í…Œì´ë¸”
â”‚   â”‚   â”œâ”€â”€ TaxCalculator.tsx      # ì„¸ì•¡ ê³„ì‚° ì»´í¬ë„ŒíŠ¸
â”‚   â”‚   â”œâ”€â”€ BulkUpload.tsx         # ì¼ê´„ ì—…ë¡œë“œ
â”‚   â”‚   â””â”€â”€ PaymentFilter.tsx      # í•„í„°ë§ ì»´í¬ë„ŒíŠ¸
â”‚   â”‚
â”‚   â””â”€â”€ receipts/
â”‚       â”œâ”€â”€ ReceiptTemplate.tsx    # ì˜ìˆ˜ì¦ í…œí”Œë¦¿
â”‚       â”œâ”€â”€ ReceiptPDF.tsx         # PDF ìƒì„± ì»´í¬ë„ŒíŠ¸
â”‚       â”œâ”€â”€ ReceiptList.tsx        # ì˜ìˆ˜ì¦ ëª©ë¡
â”‚       â””â”€â”€ EmailForm.tsx          # ì´ë©”ì¼ ë°œì†¡ í¼
â”‚
â”œâ”€â”€ lib/
â”‚   â”œâ”€â”€ supabase/
â”‚   â”‚   â”œâ”€â”€ client.ts              # í´ë¼ì´ì–¸íŠ¸ìš© Supabase
â”‚   â”‚   â”œâ”€â”€ server.ts              # ì„œë²„ìš© Supabase
â”‚   â”‚   â””â”€â”€ middleware.ts          # ì¸ì¦ ë¯¸ë“¤ì›¨ì–´
â”‚   â”‚
â”‚   â”œâ”€â”€ utils/
â”‚   â”‚   â”œâ”€â”€ tax-calculator.ts      # 3.3% ì„¸ì•¡ ê³„ì‚° ë¡œì§
â”‚   â”‚   â”œâ”€â”€ validators.ts          # ìœ íš¨ì„± ê²€ì¦ (ì£¼ë¯¼ë²ˆí˜¸ ë“±)
â”‚   â”‚   â”œâ”€â”€ formatters.ts          # ê¸ˆì•¡, ë‚ ì§œ í¬ë§·íŒ…
â”‚   â”‚   â”œâ”€â”€ encryption.ts          # ì•”í˜¸í™”/ë³µí˜¸í™”
â”‚   â”‚   â””â”€â”€ cn.ts                  # í´ë˜ìŠ¤ëª… ìœ í‹¸ë¦¬í‹°
â”‚   â”‚
â”‚   â”œâ”€â”€ constants/
â”‚   â”‚   â”œâ”€â”€ business-types.ts      # ì‚¬ì—…ì ìœ í˜• ìƒìˆ˜
â”‚   â”‚   â”œâ”€â”€ banks.ts               # ì€í–‰ ëª©ë¡
â”‚   â”‚   â””â”€â”€ routes.ts              # ë¼ìš°íŠ¸ ê²½ë¡œ
â”‚   â”‚
â”‚   â””â”€â”€ pdf/
â”‚       â””â”€â”€ receipt-generator.ts   # PDF ìƒì„± ë¡œì§
â”‚
â”œâ”€â”€ types/
â”‚   â”œâ”€â”€ index.ts                    # ê³µí†µ íƒ€ì…
â”‚   â”œâ”€â”€ payee.ts                    # ì§€ê¸‰ ëŒ€ìƒì íƒ€ì…
â”‚   â”œâ”€â”€ payment.ts                  # ì§€ê¸‰ íƒ€ì…
â”‚   â”œâ”€â”€ receipt.ts                  # ì˜ìˆ˜ì¦ íƒ€ì…
â”‚   â””â”€â”€ database.ts                 # Supabase íƒ€ì…
â”‚
â”œâ”€â”€ hooks/
â”‚   â”œâ”€â”€ usePayees.ts                # ëŒ€ìƒì ê´€ë ¨ í›…
â”‚   â”œâ”€â”€ usePayments.ts              # ì§€ê¸‰ ê´€ë ¨ í›…
â”‚   â”œâ”€â”€ useReceipts.ts              # ì˜ìˆ˜ì¦ ê´€ë ¨ í›…
â”‚   â”œâ”€â”€ useAuth.ts                  # ì¸ì¦ ê´€ë ¨ í›…
â”‚   â””â”€â”€ useToast.ts                 # í† ìŠ¤íŠ¸ ì•Œë¦¼ í›…
â”‚
â”œâ”€â”€ store/
â”‚   â””â”€â”€ auth-store.ts               # Zustand ì¸ì¦ ìŠ¤í† ì–´
â”‚
â”œâ”€â”€ tests/                          # Playwright E2E í…ŒìŠ¤íŠ¸
â”‚   â”œâ”€â”€ e2e/
â”‚   â”‚   â”œâ”€â”€ auth.spec.ts           # ì¸ì¦ í…ŒìŠ¤íŠ¸
â”‚   â”‚   â”œâ”€â”€ payee-management.spec.ts
â”‚   â”‚   â”œâ”€â”€ payment-process.spec.ts
â”‚   â”‚   â”œâ”€â”€ bulk-upload.spec.ts
â”‚   â”‚   â””â”€â”€ receipt-generation.spec.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ fixtures/
â”‚   â”‚   â””â”€â”€ test-data.ts           # í…ŒìŠ¤íŠ¸ ë°ì´í„°
â”‚   â”‚
â”‚   â””â”€â”€ playwright.config.ts
â”‚
â”œâ”€â”€ supabase/
â”‚   â”œâ”€â”€ migrations/                 # ë°ì´í„°ë² ì´ìŠ¤ ë§ˆì´ê·¸ë ˆì´ì…˜
â”‚   â”‚   â””â”€â”€ 001_initial_schema.sql
â”‚   â”‚
â”‚   â””â”€â”€ seed.sql                    # í…ŒìŠ¤íŠ¸ ë°ì´í„° ì‹œë“œ
â”‚
â”œâ”€â”€ public/
â”‚   â”œâ”€â”€ fonts/                      # PDFìš© í•œê¸€ í°íŠ¸
â”‚   â”‚   â””â”€â”€ NanumGothic.ttf
â”‚   â”‚
â”‚   â””â”€â”€ templates/
â”‚       â””â”€â”€ payment-template.xlsx   # ì—‘ì…€ í…œí”Œë¦¿
â”‚
â”œâ”€â”€ .env.local                      # í™˜ê²½ ë³€ìˆ˜ (ë¡œì»¬)
â”œâ”€â”€ .env.example                    # í™˜ê²½ ë³€ìˆ˜ ì˜ˆì œ
â”œâ”€â”€ .gitignore
â”œâ”€â”€ next.config.js
â”œâ”€â”€ tailwind.config.ts
â”œâ”€â”€ tsconfig.json
â”œâ”€â”€ package.json
â”œâ”€â”€ postcss.config.js
â”œâ”€â”€ components.json                 # shadcn/ui ì„¤ì •
â”œâ”€â”€ README.md
â””â”€â”€ prd.md                          # ì´ ë¬¸ì„œ
```

---

## ğŸ—„ ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ (Supabase)

### ERD ê°œìš”
```
companies (íšŒì‚¬)
    â†“ 1:N
payees (ì§€ê¸‰ ëŒ€ìƒì)
    â†“ 1:N
payments (ì§€ê¸‰ ë‚´ì—­)
    â†“ 1:N
receipts (ì›ì²œì§•ìˆ˜ì˜ìˆ˜ì¦)
```

### í…Œì´ë¸” ìƒì„¸ ì„¤ê³„

#### 1. companies (íšŒì‚¬ ì •ë³´)
```sql
CREATE TABLE companies (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  user_id UUID REFERENCES auth.users NOT NULL,
  business_number VARCHAR(10) NOT NULL UNIQUE,
  company_name VARCHAR(200) NOT NULL,
  representative_name VARCHAR(100) NOT NULL,
  address TEXT,
  contact VARCHAR(20),
  email VARCHAR(255),
  created_at TIMESTAMPTZ DEFAULT NOW(),
  updated_at TIMESTAMPTZ DEFAULT NOW()
);

COMMENT ON TABLE companies IS 'ì›ì²œì§•ìˆ˜ì˜ë¬´ì(íšŒì‚¬) ì •ë³´';
COMMENT ON COLUMN companies.user_id IS 'ì¸ì¦ëœ ì‚¬ìš©ì ID (Supabase Auth)';
COMMENT ON COLUMN companies.business_number IS 'ì‚¬ì—…ìë“±ë¡ë²ˆí˜¸ (10ìë¦¬)';
```

#### 2. payees (ì§€ê¸‰ ëŒ€ìƒì)
```sql
CREATE TABLE payees (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  company_id UUID REFERENCES companies(id) ON DELETE CASCADE NOT NULL,
  name VARCHAR(100) NOT NULL,
  resident_number_encrypted TEXT NOT NULL,
  address TEXT,
  contact VARCHAR(20),
  email VARCHAR(255),
  bank_name VARCHAR(50),
  account_number_encrypted TEXT,
  business_type VARCHAR(50) NOT NULL,
  contract_start_date DATE,
  contract_end_date DATE,
  contract_file_url TEXT,
  is_active BOOLEAN DEFAULT TRUE,
  created_at TIMESTAMPTZ DEFAULT NOW(),
  updated_at TIMESTAMPTZ DEFAULT NOW(),
  CONSTRAINT unique_payee_per_company UNIQUE(company_id, resident_number_encrypted)
);

COMMENT ON TABLE payees IS 'ì‚¬ì—…ì†Œë“ ì§€ê¸‰ ëŒ€ìƒì';
COMMENT ON COLUMN payees.resident_number_encrypted IS 'ì•”í˜¸í™”ëœ ì£¼ë¯¼ë“±ë¡ë²ˆí˜¸';
COMMENT ON COLUMN payees.business_type IS 'í”„ë¦¬ëœì„œ, ê°•ì‚¬, ì™¸ì£¼ì§ì› ë“±';
COMMENT ON COLUMN payees.contract_file_url IS 'Supabase Storage URL';
```

#### 3. payments (ì§€ê¸‰ ë‚´ì—­)
```sql
CREATE TABLE payments (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  company_id UUID REFERENCES companies(id) ON DELETE CASCADE NOT NULL,
  payee_id UUID REFERENCES payees(id) ON DELETE CASCADE NOT NULL,
  payment_date DATE NOT NULL,
  payment_amount DECIMAL(15, 2) NOT NULL CHECK (payment_amount >= 0),
  income_tax DECIMAL(15, 2) NOT NULL,
  local_income_tax DECIMAL(15, 2) NOT NULL,
  total_tax DECIMAL(15, 2) NOT NULL,
  net_amount DECIMAL(15, 2) NOT NULL,
  payment_reason TEXT,
  receipt_issued BOOLEAN DEFAULT FALSE,
  receipt_issued_at TIMESTAMPTZ,
  created_at TIMESTAMPTZ DEFAULT NOW(),
  updated_at TIMESTAMPTZ DEFAULT NOW()
);

COMMENT ON TABLE payments IS 'ì‚¬ì—…ì†Œë“ ì§€ê¸‰ ë‚´ì—­';
COMMENT ON COLUMN payments.income_tax IS 'ì†Œë“ì„¸ 3%';
COMMENT ON COLUMN payments.local_income_tax IS 'ì§€ë°©ì†Œë“ì„¸ 0.3%';
COMMENT ON COLUMN payments.total_tax IS 'ì´ ì›ì²œì§•ìˆ˜ì„¸ì•¡ 3.3%';
COMMENT ON COLUMN payments.net_amount IS 'ì‹¤ì§€ê¸‰ì•¡ (ì§€ê¸‰ì•¡ - ì´ì„¸ì•¡)';
```

#### 4. receipts (ì›ì²œì§•ìˆ˜ì˜ìˆ˜ì¦)
```sql
CREATE TABLE receipts (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  payment_id UUID REFERENCES payments(id) ON DELETE CASCADE NOT NULL,
  payee_id UUID REFERENCES payees(id) ON DELETE CASCADE NOT NULL,
  company_id UUID REFERENCES companies(id) ON DELETE CASCADE NOT NULL,
  receipt_number VARCHAR(50) UNIQUE NOT NULL,
  pdf_url TEXT,
  email_sent BOOLEAN DEFAULT FALSE,
  email_sent_at TIMESTAMPTZ,
  issued_by UUID REFERENCES auth.users,
  created_at TIMESTAMPTZ DEFAULT NOW()
);

COMMENT ON TABLE receipts IS 'ì›ì²œì§•ìˆ˜ì˜ìˆ˜ì¦ ë°œê¸‰ ì´ë ¥';
COMMENT ON COLUMN receipts.receipt_number IS 'ì˜ìˆ˜ì¦ ê³ ìœ  ë²ˆí˜¸ (ìë™ ìƒì„±)';
COMMENT ON COLUMN receipts.pdf_url IS 'Supabase Storageì— ì €ì¥ëœ PDF URL';
COMMENT ON COLUMN receipts.issued_by IS 'ë°œê¸‰í•œ ì‚¬ìš©ì';
```

### Row Level Security (RLS) ì •ì±…

```sql
-- RLS í™œì„±í™”
ALTER TABLE companies ENABLE ROW LEVEL SECURITY;
ALTER TABLE payees ENABLE ROW LEVEL SECURITY;
ALTER TABLE payments ENABLE ROW LEVEL SECURITY;
ALTER TABLE receipts ENABLE ROW LEVEL SECURITY;

-- íšŒì‚¬: ìì‹ ì˜ ë°ì´í„°ë§Œ ì ‘ê·¼
CREATE POLICY "Users can only access their own company"
  ON companies FOR ALL
  USING (auth.uid() = user_id);

-- ì§€ê¸‰ ëŒ€ìƒì: ìì‹ ì˜ íšŒì‚¬ ì†Œì†ë§Œ ì ‘ê·¼
CREATE POLICY "Users can only access their company's payees"
  ON payees FOR ALL
  USING (company_id IN (
    SELECT id FROM companies WHERE user_id = auth.uid()
  ));

-- ì§€ê¸‰ ë‚´ì—­: ìì‹ ì˜ íšŒì‚¬ ì†Œì†ë§Œ ì ‘ê·¼
CREATE POLICY "Users can only access their company's payments"
  ON payments FOR ALL
  USING (company_id IN (
    SELECT id FROM companies WHERE user_id = auth.uid()
  ));

-- ì˜ìˆ˜ì¦: ìì‹ ì˜ íšŒì‚¬ ì†Œì†ë§Œ ì ‘ê·¼
CREATE POLICY "Users can only access their company's receipts"
  ON receipts FOR ALL
  USING (company_id IN (
    SELECT id FROM companies WHERE user_id = auth.uid()
  ));
```

### ì¸ë±ìŠ¤ (ì„±ëŠ¥ ìµœì í™”)

```sql
-- ì™¸ë˜ í‚¤ ì¸ë±ìŠ¤
CREATE INDEX idx_payees_company_id ON payees(company_id);
CREATE INDEX idx_payments_company_id ON payments(company_id);
CREATE INDEX idx_payments_payee_id ON payments(payee_id);
CREATE INDEX idx_payments_date ON payments(payment_date);
CREATE INDEX idx_receipts_payment_id ON receipts(payment_id);
CREATE INDEX idx_receipts_company_id ON receipts(company_id);

-- ê²€ìƒ‰ ìµœì í™” ì¸ë±ìŠ¤
CREATE INDEX idx_payees_name ON payees(name);
CREATE INDEX idx_payees_is_active ON payees(is_active);
CREATE INDEX idx_payments_receipt_issued ON payments(receipt_issued);
```

### íŠ¸ë¦¬ê±° (ìë™í™”)

```sql
-- ì—…ë°ì´íŠ¸ ì‹œê° ìë™ ê°±ì‹ 
CREATE OR REPLACE FUNCTION update_updated_at_column()
RETURNS TRIGGER AS $$
BEGIN
    NEW.updated_at = NOW();
    RETURN NEW;
END;
$$ language 'plpgsql';

CREATE TRIGGER update_companies_updated_at BEFORE UPDATE ON companies
    FOR EACH ROW EXECUTE FUNCTION update_updated_at_column();

CREATE TRIGGER update_payees_updated_at BEFORE UPDATE ON payees
    FOR EACH ROW EXECUTE FUNCTION update_updated_at_column();

CREATE TRIGGER update_payments_updated_at BEFORE UPDATE ON payments
    FOR EACH ROW EXECUTE FUNCTION update_updated_at_column();
```

---

## ğŸ“¦ ì£¼ìš” ì˜ì¡´ì„± (package.json)

```json
{
  "name": "tax-withholding-mvp",
  "version": "0.1.0",
  "private": true,
  "scripts": {
    "dev": "next dev",
    "build": "next build",
    "start": "next start",
    "lint": "next lint",
    "test": "playwright test",
    "test:ui": "playwright test --ui",
    "test:debug": "playwright test --debug"
  },
  "dependencies": {
    "next": "^14.2.0",
    "react": "^18.3.0",
    "react-dom": "^18.3.0",
    "@supabase/supabase-js": "^2.45.0",
    "@supabase/ssr": "^0.5.0",
    "@tanstack/react-query": "^5.56.0",
    "zustand": "^4.5.0",
    "react-hook-form": "^7.53.0",
    "zod": "^3.23.0",
    "@hookform/resolvers": "^3.9.0",
    "jspdf": "^2.5.2",
    "jspdf-autotable": "^3.8.0",
    "xlsx": "^0.18.5",
    "date-fns": "^3.6.0",
    "resend": "^4.0.0",
    "clsx": "^2.1.0",
    "tailwind-merge": "^2.5.0",
    "lucide-react": "^0.445.0",
    "@radix-ui/react-dialog": "^1.1.0",
    "@radix-ui/react-select": "^2.1.0",
    "@radix-ui/react-label": "^2.1.0",
    "@radix-ui/react-dropdown-menu": "^2.1.0",
    "class-variance-authority": "^0.7.0",
    "crypto-js": "^4.2.0"
  },
  "devDependencies": {
    "@types/node": "^22.0.0",
    "@types/react": "^18.3.0",
    "@types/react-dom": "^18.3.0",
    "@types/crypto-js": "^4.2.0",
    "@playwright/test": "^1.47.0",
    "typescript": "^5.6.0",
    "tailwindcss": "^3.4.0",
    "postcss": "^8.4.0",
    "autoprefixer": "^10.4.0",
    "eslint": "^8.57.0",
    "eslint-config-next": "^14.2.0"
  }
}
```

---

## ğŸ” í™˜ê²½ ë³€ìˆ˜

### .env.local (ê°œë°œ í™˜ê²½)
```bash
# Supabase
NEXT_PUBLIC_SUPABASE_URL=https://your-project.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=your-anon-key
SUPABASE_SERVICE_ROLE_KEY=your-service-role-key

# Resend (ì´ë©”ì¼)
RESEND_API_KEY=re_xxxxxxxxxxxxx
RESEND_FROM_EMAIL=noreply@yourdomain.com

# ì•”í˜¸í™” (ì£¼ë¯¼ë²ˆí˜¸, ê³„ì¢Œë²ˆí˜¸)
ENCRYPTION_SECRET_KEY=your-256-bit-secret-key-here

# Next.js
NEXT_PUBLIC_APP_URL=http://localhost:3000
NODE_ENV=development
```

### .env.production (Vercel ë°°í¬ í™˜ê²½)
```bash
# Vercel í™˜ê²½ ë³€ìˆ˜ ì„¤ì •ì—ì„œ ì…ë ¥
NEXT_PUBLIC_SUPABASE_URL=
NEXT_PUBLIC_SUPABASE_ANON_KEY=
SUPABASE_SERVICE_ROLE_KEY=
RESEND_API_KEY=
ENCRYPTION_SECRET_KEY=
NEXT_PUBLIC_APP_URL=https://yourdomain.vercel.app
```

---

## ğŸš€ ê°œë°œ ìš°ì„ ìˆœìœ„ ë° ì¼ì •

### Week 1-2: í”„ë¡œì íŠ¸ ì´ˆê¸° ì„¤ì •
- [ ] Next.js í”„ë¡œì íŠ¸ ìƒì„± ë° ê¸°ë³¸ ì„¤ì •
- [ ] Supabase í”„ë¡œì íŠ¸ ìƒì„± ë° ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ êµ¬ì¶•
- [ ] Tailwind CSS + shadcn/ui ì„¤ì¹˜ ë° ì„¤ì •
- [ ] ì¸ì¦ ì‹œìŠ¤í…œ êµ¬ì¶• (Supabase Auth)
- [ ] ê¸°ë³¸ ë ˆì´ì•„ì›ƒ êµ¬ì„± (ì‚¬ì´ë“œë°”, í—¤ë”)
- [ ] Git ì €ì¥ì†Œ ìƒì„± ë° Vercel ì—°ê²°

### Week 3-4: í•µì‹¬ ê¸°ëŠ¥ ê°œë°œ
- [ ] **ì§€ê¸‰ ëŒ€ìƒì ê´€ë¦¬ (A ê¸°ëŠ¥)**
  - [ ] ëŒ€ìƒì ë“±ë¡ í¼
  - [ ] ëŒ€ìƒì ëª©ë¡ í…Œì´ë¸”
  - [ ] ëŒ€ìƒì ìƒì„¸/ìˆ˜ì •/ì‚­ì œ
  - [ ] ì£¼ë¯¼ë²ˆí˜¸ ì•”í˜¸í™” ë¡œì§
  - [ ] ì¤‘ë³µ ê²€ì¦ ë¡œì§
  - [ ] ê³„ì•½ì„œ íŒŒì¼ ì—…ë¡œë“œ (Supabase Storage)

- [ ] **ì§€ê¸‰ ê´€ë¦¬ (B ê¸°ëŠ¥)**
  - [ ] ì§€ê¸‰ ë“±ë¡ í¼
  - [ ] 3.3% ìë™ ì„¸ì•¡ ê³„ì‚° ë¡œì§
  - [ ] ì§€ê¸‰ ëª©ë¡ í…Œì´ë¸”
  - [ ] ê¸°ê°„ë³„/ëŒ€ìƒìë³„ í•„í„°ë§
  - [ ] ê²€ìƒ‰ ê¸°ëŠ¥

### Week 5: ì¼ê´„ ì²˜ë¦¬ ë° ì—‘ì…€
- [ ] **ì—‘ì…€ ì²˜ë¦¬**
  - [ ] ì—‘ì…€ í…œí”Œë¦¿ ìƒì„±
  - [ ] ì—‘ì…€ íŒŒì¼ ì—…ë¡œë“œ ê¸°ëŠ¥
  - [ ] ë°ì´í„° ê²€ì¦ ë¡œì§
  - [ ] ì¼ê´„ ì§€ê¸‰ ì²˜ë¦¬
  - [ ] ì—‘ì…€ ë‹¤ìš´ë¡œë“œ ê¸°ëŠ¥

### Week 6: ì˜ìˆ˜ì¦ ë°œê¸‰ ë° ë°°í¬
- [ ] **ì›ì²œì§•ìˆ˜ì˜ìˆ˜ì¦ (C ê¸°ëŠ¥)**
  - [ ] ì˜ìˆ˜ì¦ í…œí”Œë¦¿ ë””ìì¸
  - [ ] PDF ìƒì„± ë¡œì§ (jsPDF)
  - [ ] ê°œë³„ PDF ë‹¤ìš´ë¡œë“œ
  - [ ] ì¼ê´„ PDF ìƒì„± (ZIP)
  - [ ] ì´ë©”ì¼ ë°œì†¡ ê¸°ëŠ¥ (Resend)
  - [ ] ë°œê¸‰ ì´ë ¥ ê´€ë¦¬

- [ ] **í…ŒìŠ¤íŠ¸ ë° ë°°í¬**
  - [ ] Playwright E2E í…ŒìŠ¤íŠ¸ ì‘ì„±
  - [ ] ì£¼ìš” ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸ (ë¡œê·¸ì¸, CRUD, ì˜ìˆ˜ì¦ ë°œê¸‰)
  - [ ] Vercel í”„ë¡œë•ì…˜ ë°°í¬
  - [ ] í™˜ê²½ ë³€ìˆ˜ ì„¤ì •
  - [ ] ë„ë©”ì¸ ì—°ê²° (ì˜µì…˜)

---

## ğŸ§ª í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤ (Playwright)

### 1. ì¸ì¦ í…ŒìŠ¤íŠ¸
```typescript
// tests/e2e/auth.spec.ts
- íšŒì›ê°€ì… í”„ë¡œì„¸ìŠ¤
- ë¡œê·¸ì¸/ë¡œê·¸ì•„ì›ƒ
- ì¸ì¦ ìƒíƒœ ìœ ì§€
- ë¹„ì¸ì¦ ì ‘ê·¼ ì°¨ë‹¨
```

### 2. ëŒ€ìƒì ê´€ë¦¬ í…ŒìŠ¤íŠ¸
```typescript
// tests/e2e/payee-management.spec.ts
- ëŒ€ìƒì ë“±ë¡ (í•„ìˆ˜ í•„ë“œ ê²€ì¦)
- ì£¼ë¯¼ë²ˆí˜¸ ì¤‘ë³µ ê²€ì¦
- ëŒ€ìƒì ëª©ë¡ ì¡°íšŒ
- ëŒ€ìƒì ê²€ìƒ‰ ë° í•„í„°ë§
- ëŒ€ìƒì ìˆ˜ì •
- ëŒ€ìƒì ì‚­ì œ
- ê³„ì•½ì„œ íŒŒì¼ ì—…ë¡œë“œ
```

### 3. ì§€ê¸‰ ì²˜ë¦¬ í…ŒìŠ¤íŠ¸
```typescript
// tests/e2e/payment-process.spec.ts
- ì§€ê¸‰ ë“±ë¡
- ì„¸ì•¡ ìë™ ê³„ì‚° ê²€ì¦ (3.3%)
- ì§€ê¸‰ ë‚´ì—­ ì¡°íšŒ
- ê¸°ê°„ë³„ í•„í„°ë§
- ëŒ€ìƒìë³„ í•„í„°ë§
```

### 4. ì¼ê´„ ì—…ë¡œë“œ í…ŒìŠ¤íŠ¸
```typescript
// tests/e2e/bulk-upload.spec.ts
- ì—‘ì…€ í…œí”Œë¦¿ ë‹¤ìš´ë¡œë“œ
- ì—‘ì…€ íŒŒì¼ ì—…ë¡œë“œ
- ë°ì´í„° ê²€ì¦ ì—ëŸ¬ ì²˜ë¦¬
- ì¼ê´„ ì§€ê¸‰ ì„±ê³µ ì‹œë‚˜ë¦¬ì˜¤
```

### 5. ì˜ìˆ˜ì¦ ë°œê¸‰ í…ŒìŠ¤íŠ¸
```typescript
// tests/e2e/receipt-generation.spec.ts
- ê°œë³„ ì˜ìˆ˜ì¦ PDF ìƒì„±
- ì¼ê´„ ì˜ìˆ˜ì¦ ìƒì„±
- PDF ë‹¤ìš´ë¡œë“œ
- ì´ë©”ì¼ ë°œì†¡
- ì¬ë°œê¸‰
```

---

## ğŸ“Š í•µì‹¬ ê³„ì‚° ë¡œì§

### ì„¸ì•¡ ê³„ì‚° ê³µì‹
```typescript
// lib/utils/tax-calculator.ts

interface TaxCalculation {
  paymentAmount: number;      // ì§€ê¸‰ì•¡
  incomeTax: number;          // ì†Œë“ì„¸ (3%)
  localIncomeTax: number;     // ì§€ë°©ì†Œë“ì„¸ (0.3%)
  totalTax: number;           // ì´ ì„¸ì•¡ (3.3%)
  netAmount: number;          // ì‹¤ì§€ê¸‰ì•¡
}

export function calculateTax(paymentAmount: number): TaxCalculation {
  // ì†Œë“ì„¸ 3%
  const incomeTax = Math.round(paymentAmount * 0.03);
  
  // ì§€ë°©ì†Œë“ì„¸ 0.3%
  const localIncomeTax = Math.round(paymentAmount * 0.003);
  
  // ì´ ì›ì²œì§•ìˆ˜ì„¸ì•¡ 3.3%
  const totalTax = incomeTax + localIncomeTax;
  
  // ì‹¤ì§€ê¸‰ì•¡ = ì§€ê¸‰ì•¡ - ì´ì„¸ì•¡
  const netAmount = paymentAmount - totalTax;
  
  return {
    paymentAmount,
    incomeTax,
    localIncomeTax,
    totalTax,
    netAmount
  };
}

// ì‚¬ìš© ì˜ˆì‹œ
const result = calculateTax(1000000);
// {
//   paymentAmount: 1000000,
//   incomeTax: 30000,
//   localIncomeTax: 3000,
//   totalTax: 33000,
//   netAmount: 967000
// }
```

### ì£¼ë¯¼ë²ˆí˜¸ ê²€ì¦
```typescript
// lib/utils/validators.ts

export function validateResidentNumber(residentNumber: string): boolean {
  // í˜•ì‹ ê²€ì¦: 000000-0000000
  const regex = /^\d{6}-\d{7}$/;
  if (!regex.test(residentNumber)) return false;
  
  // ì²´í¬ì„¬ ê²€ì¦ ë¡œì§ (ìƒëµ ê°€ëŠ¥)
  const numbers = residentNumber.replace('-', '').split('').map(Number);
  const weights = [2, 3, 4, 5, 6, 7, 8, 9, 2, 3, 4, 5];
  
  let sum = 0;
  for (let i = 0; i < 12; i++) {
    sum += numbers[i] * weights[i];
  }
  
  const checkDigit = (11 - (sum % 11)) % 10;
  return checkDigit === numbers[12];
}
```

---

## ğŸ”’ ë³´ì•ˆ ê³ ë ¤ì‚¬í•­

### 1. ê°œì¸ì •ë³´ ì•”í˜¸í™”
- ì£¼ë¯¼ë“±ë¡ë²ˆí˜¸: AES-256 ì•”í˜¸í™” ì €ì¥
- ê³„ì¢Œë²ˆí˜¸: AES-256 ì•”í˜¸í™” ì €ì¥
- ì•”í˜¸í™” í‚¤: í™˜ê²½ ë³€ìˆ˜ë¡œ ê´€ë¦¬ (ENCRYPTION_SECRET_KEY)

### 2. ë°ì´í„° ì ‘ê·¼ ì œì–´
- Supabase Row Level Security (RLS) í™œìš©
- ì‚¬ìš©ìëŠ” ìì‹ ì˜ íšŒì‚¬ ë°ì´í„°ë§Œ ì ‘ê·¼ ê°€ëŠ¥
- API Routesì—ì„œ ì¶”ê°€ ê¶Œí•œ ê²€ì¦

### 3. ì…ë ¥ ê²€ì¦
- Zod ìŠ¤í‚¤ë§ˆë¥¼ í†µí•œ íƒ€ì… ì•ˆì „ì„±
- XSS ë°©ì§€ (React ìë™ ì´ìŠ¤ì¼€ì´í”„)
- SQL Injection ë°©ì§€ (Supabase ìë™ ë°©ì§€)

### 4. HTTPS í†µì‹ 
- Vercel ìë™ HTTPS ì ìš©
- Supabase ëª¨ë“  í†µì‹  HTTPS

### 5. ê°œì¸ì •ë³´ ë§ˆìŠ¤í‚¹
- ì£¼ë¯¼ë²ˆí˜¸ ë’·ìë¦¬ ë§ˆìŠ¤í‚¹ í‘œì‹œ (*******)
- ê³„ì¢Œë²ˆí˜¸ ì¤‘ê°„ ë§ˆìŠ¤í‚¹ (****-**-*****)

---

## ğŸ“± ë°˜ì‘í˜• ë””ìì¸

### ë¸Œë ˆì´í¬í¬ì¸íŠ¸ (Tailwind CSS ê¸°ì¤€)
```typescript
sm: 640px   // ëª¨ë°”ì¼
md: 768px   // íƒœë¸”ë¦¿
lg: 1024px  // ë°ìŠ¤í¬í†±
xl: 1280px  // ì™€ì´ë“œ ë°ìŠ¤í¬í†±
```

### ìš°ì„ ìˆœìœ„
- Desktop-first ê°œë°œ
- ëª¨ë°”ì¼ ì¡°íšŒ ê¸°ëŠ¥ ì§€ì›
- íƒœë¸”ë¦¿ ìµœì í™”

---

## ğŸ¨ ë””ìì¸ ê°€ì´ë“œ

### ì»¬ëŸ¬ íŒ”ë ˆíŠ¸
```css
Primary: Blue (#3B82F6)     /* ì£¼ìš” ì•¡ì…˜ */
Success: Green (#10B981)    /* ì„±ê³µ ë©”ì‹œì§€ */
Warning: Yellow (#F59E0B)   /* ê²½ê³  */
Danger: Red (#EF4444)       /* ì—ëŸ¬, ì‚­ì œ */
Gray: Slate (#64748B)       /* í…ìŠ¤íŠ¸, ë°°ê²½ */
```

### íƒ€ì´í¬ê·¸ë˜í”¼
- ê¸°ë³¸ í°íŠ¸: system-ui, sans-serif
- ì œëª©: font-bold, text-2xl ~ text-4xl
- ë³¸ë¬¸: font-normal, text-sm ~ text-base
- ìˆ«ì(ê¸ˆì•¡): font-mono (ê°€ë…ì„±)

---

## ğŸ“„ API ì—”ë“œí¬ì¸íŠ¸ ì„¤ê³„

### ì§€ê¸‰ ëŒ€ìƒì (Payees)
```
GET    /api/payees          # ëª©ë¡ ì¡°íšŒ
POST   /api/payees          # ì‹ ê·œ ë“±ë¡
GET    /api/payees/:id      # ìƒì„¸ ì¡°íšŒ
PUT    /api/payees/:id      # ìˆ˜ì •
DELETE /api/payees/:id      # ì‚­ì œ
```

### ì§€ê¸‰ ê´€ë¦¬ (Payments)
```
GET    /api/payments        # ëª©ë¡ ì¡°íšŒ (í•„í„°ë§ ì§€ì›)
POST   /api/payments        # ì‹ ê·œ ì§€ê¸‰
GET    /api/payments/:id    # ìƒì„¸ ì¡°íšŒ
PUT    /api/payments/:id    # ìˆ˜ì •
DELETE /api/payments/:id    # ì‚­ì œ
POST   /api/payments/bulk   # ì¼ê´„ ì§€ê¸‰ (ì—‘ì…€ ì—…ë¡œë“œ)
```

### ì˜ìˆ˜ì¦ (Receipts)
```
GET    /api/receipts                  # ëª©ë¡ ì¡°íšŒ
POST   /api/receipts/generate         # PDF ìƒì„±
POST   /api/receipts/send-email       # ì´ë©”ì¼ ë°œì†¡
GET    /api/receipts/:id              # ìƒì„¸ ì¡°íšŒ
```

### íŒŒì¼ ì—…ë¡œë“œ (Upload)
```
POST   /api/upload/excel              # ì—‘ì…€ ì—…ë¡œë“œ
POST   /api/upload/contract           # ê³„ì•½ì„œ ì—…ë¡œë“œ
```

---

## âš ï¸ ë²•ì  ì¤€ìˆ˜ ì‚¬í•­

### 1. ê°œì¸ì •ë³´ë³´í˜¸ë²•
- ê°œì¸ì •ë³´ ìˆ˜ì§‘ ë™ì˜ í•„ìˆ˜
- ì•”í˜¸í™” ì €ì¥ ì˜ë¬´
- ë³´ìœ ê¸°ê°„ ëª…ì‹œ (5ë…„)
- íŒŒê¸° ì ˆì°¨ ë§ˆë ¨

### 2. ì†Œë“ì„¸ë²•
- 3.3% ì›ì²œì§•ìˆ˜ ì •í™•ì„±
- ì›ì²œì§•ìˆ˜ì˜ìˆ˜ì¦ ì–‘ì‹ ì¤€ìˆ˜
- ì§€ê¸‰ëª…ì„¸ì„œ ì œì¶œ ì˜ë¬´ (ì—° 1íšŒ)

### 3. ì „ìë¬¸ì„œë²•
- ì „ìë¬¸ì„œ ë³´ê´€ ìš”ê±´
- PDF ë¬´ê²°ì„± ë³´ì¥

---

## ğŸ¯ ì„±ê³µ ì§€í‘œ (KPI)

### MVP ëª©í‘œ
- [ ] íšŒì›ê°€ì… ë° ë¡œê·¸ì¸ ê¸°ëŠ¥ ì‘ë™
- [ ] ì§€ê¸‰ ëŒ€ìƒì 10ëª… ì´ìƒ ë“±ë¡ ê°€ëŠ¥
- [ ] ì§€ê¸‰ ë‚´ì—­ 100ê±´ ì´ìƒ ë“±ë¡ ê°€ëŠ¥
- [ ] ì›ì²œì§•ìˆ˜ì˜ìˆ˜ì¦ PDF ìƒì„± ì„±ê³µë¥  100%
- [ ] ì—‘ì…€ ì¼ê´„ ì—…ë¡œë“œ ì„±ê³µë¥  95% ì´ìƒ
- [ ] í˜ì´ì§€ ë¡œë”© ì‹œê°„ 3ì´ˆ ì´ë‚´
- [ ] ëª¨ë°”ì¼ ë°˜ì‘í˜• ì§€ì›
- [ ] E2E í…ŒìŠ¤íŠ¸ í†µê³¼ìœ¨ 100%

---

## ğŸ“š ì°¸ê³  ìë£Œ

### êµ­ì„¸ì²­ ê´€ë ¨
- ì†Œë“ì„¸ë²• ì‹œí–‰ë ¹ (ì‚¬ì—…ì†Œë“ ì›ì²œì§•ìˆ˜)
- ì›ì²œì§•ìˆ˜ì˜ìˆ˜ì¦ í‘œì¤€ ì„œì‹
- í™ˆíƒìŠ¤ API ë¬¸ì„œ (í–¥í›„ ì—°ë™ ì‹œ)

### ê¸°ìˆ  ë¬¸ì„œ
- [Next.js 14 Documentation](https://nextjs.org/docs)
- [Supabase Documentation](https://supabase.com/docs)
- [Vercel Documentation](https://vercel.com/docs)
- [Playwright Documentation](https://playwright.dev)
- [shadcn/ui](https://ui.shadcn.com)
- [Tailwind CSS](https://tailwindcss.com)

---

## ğŸ“ ë¬¸ì˜ ë° ì§€ì›

í”„ë¡œì íŠ¸ ê´€ë ¨ ë¬¸ì˜ì‚¬í•­ì€ ê°œë°œíŒ€ì— ì—°ë½í•˜ì‹œê¸° ë°”ëë‹ˆë‹¤.

---

**ë¬¸ì„œ ë²„ì „**: 1.0.0  
**ìµœì¢… ìˆ˜ì •ì¼**: 2025-09-30  
**ì‘ì„±ì**: AI Product Manager  
**ìƒíƒœ**: Draft â†’ Review â†’ **Approved**
